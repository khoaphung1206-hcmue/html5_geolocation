<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HTML5 Geolocation</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<div class="card">
  <h2>Demo HTML5 Geolocation - thực hiện bới nhóm Bit by Bit</h2>
  <button id="get">Lấy vị trí</button>
  <button id="clear" class="danger">Xóa vị trí</button>
  <div id="status" style="margin-top:10px; color:#555">Chưa lấy vị trí.</div>
  <div id="map"></div>
</div>
<script>
const btnGet = document.getElementById('get');
const btnClear = document.getElementById('clear');
const statusEl = document.getElementById('status');
const mapEl = document.getElementById('map');
let lastPos = null;
function showPosition(pos){
  const lat = pos.coords.latitude;
  const lon = pos.coords.longitude;
  lastPos = {lat, lon};
  statusEl.textContent = `Vĩ độ: ${lat.toFixed(6)} — Kinh độ: ${lon.toFixed(6)}`;
  mapEl.innerHTML = `
    <iframe
      style="width:100%; height:250px; border:0; border-radius:6px;"
      src="https://www.openstreetmap.org/export/embed.html?bbox=${lon-0.02}%2C${lat-0.02}%2C${lon+0.02}%2C${lat+0.02}&layer=mapnik&marker=${lat}%2C${lon}">
    </iframe>`;
}
function showError(err){
  statusEl.textContent = 'Lỗi: ' + err.message;
}
btnGet.addEventListener('click', ()=>{
  statusEl.textContent = 'Đang lấy vị trí...';
  navigator.geolocation.getCurrentPosition(showPosition, showError, {
    enableHighAccuracy:true,
    timeout:10000,
    maximumAge:0
  });
});
btnClear.addEventListener('click', ()=>{
  lastPos = null;
  statusEl.textContent = 'Đã xóa vị trí.';
  mapEl.innerHTML = '';
});
</script>
</body>
</html>